mutate(
ll_lr_ratio_cut = cut(mean_ll_lr_ratio, breaks = quantile(mean_ll_lr_ratio))
)
data_muni <-
gemeentegrenzen %>%
left_join(mean_vos_2019, by = c('statcode' = 'statcode_muni'))
data %>%
ggplot() +
geom_sf(aes(fill = mean_ll_lr_ratio)) +
scale_fill_viridis_c() +
labs(title = "Gemiddelde Leerling/Leraar Ratio (per COROP regio)", fill = "") +
theme_void()
landelijk_gemiddelde = mean(vos_2019$ll_lr_ratio, na.rm = T)
gemeentegrenzen <- st_read("https://geodata.nationaalgeoregister.nl/cbsgebiedsindelingen/wfs?request=GetFeature&service=WFS&version=2.0.0&typeName=cbs_gemeente_2019_gegeneraliseerd&outputFormat=json")
mean_vos_2019 <- vos_2019 %>%
group_by(statcode_muni) %>%
summarise(
tot_onderwijzers = sum(onderwijzers),
tot_leerlingen = sum(leerlingen),
mean_school_size = mean(leerlingen),
mean_ll_lr_ratio = mean(ll_lr_ratio, na.rm = T),
perc_high_ll_lr_ratio = sum(ll_lr_ratio > landelijk_gemiddelde, na.rm = T) / n()
) %>%
ungroup() %>%
mutate(
ll_lr_ratio_cut = cut(mean_ll_lr_ratio, breaks = quantile(mean_ll_lr_ratio))
)
data_muni <-
gemeentegrenzen %>%
left_join(mean_vos_2019, by = c('statcode' = 'statcode_muni'))
data_muni %>%
ggplot() +
geom_sf(aes(fill = mean_ll_lr_ratio)) +
scale_fill_viridis_c() +
labs(title = "Gemiddelde Leerling/Leraar Ratio (per COROP regio)", fill = "") +
theme_void()
landelijk_gemiddelde = mean(vos_2019$ll_lr_ratio, na.rm = T)
gemeentegrenzen <- st_read("https://geodata.nationaalgeoregister.nl/cbsgebiedsindelingen/wfs?request=GetFeature&service=WFS&version=2.0.0&typeName=cbs_gemeente_2019_gegeneraliseerd&outputFormat=json")
mean_vos_2019 <- vos_2019 %>%
group_by(statcode_muni) %>%
summarise(
tot_onderwijzers = sum(onderwijzers),
tot_leerlingen = sum(leerlingen),
mean_school_size = mean(leerlingen),
mean_ll_lr_ratio = mean(ll_lr_ratio, na.rm = T),
perc_high_ll_lr_ratio = sum(ll_lr_ratio > landelijk_gemiddelde, na.rm = T) / n()
) %>%
ungroup() %>%
mutate(
ll_lr_ratio_cut = cut(mean_ll_lr_ratio, breaks = quantile(mean_ll_lr_ratio))
)
data_muni <-
gemeentegrenzen %>%
left_join(mean_vos_2019, by = c('statcode' = 'statcode_muni'))
data_muni %>%
ggplot() +
geom_sf(aes(fill = mean_ll_lr_ratio)) +
scale_fill_viridis_c() +
labs(title = "Gemiddelde Leerling/Leraar Ratio (per gemeente)", fill = "") +
theme_void()
View(data_muni)
View(functiemix_school)
library(tidyverse)
adres_vo = read_csv('../data/instellingenvo.csv') %>% select(
brin = `BRIN NUMMER`,
pc6 = POSTCODE,
statcode_muni = GEMEENTENUMMER,
statcode_corop = `COROPGEBIED CODE`
)
functiemix_school = read_csv('../data/functiemix-instellingen.csv') %>% select(
jaar = JAAR,
brin = BRIN_NUMMER,
naam_school = INSTELLINGSNAAM,
gemeente = GEMEENTENAAM,
bevoegd_gezag = BEVOEGD_GEZAGNUMMER,
ll_lr_ratio = LEERLING_LERAAR_RATIO,
schooltype = SCHOOLTYPE,
medewerkers = OMVANG_FORMATIE_TOTAAL,
managers = OMVANG_FORMATIE_MANAGER,
ondersteunend_personeel = OMVANG_FORMATIE_OOP_OBP,
onderwijzers = OMVANG_FORMATIE_OP,
medewerkers_op_salaris = OMVANG_FORMATIE_OP_BRUTSAL,
loonsom = LOONSOM_OP_BRUTSAL,
gem_loonsom = GEMIDDELDE_LOONSOM_OP_BRUTSAL,
leerlingen = AANTAL_LEERLINGEN,
loc_randstad = RANDSTAD,
gewicht_ll = AANTAL_GEWICHTLEERLINGEN
) %>% mutate(
perc_gewicht = gewicht_ll / leerlingen
)
functiemix_school = left_join(functiemix_school, adres_vo)
View(functiemix_school)
library(tidyverse)
adres_vo = read_csv('../data/instellingenvo.csv') %>% select(
brin = `BRIN NUMMER`,
pc6 = POSTCODE,
statcode_muni = GEMEENTENUMMER,
statcode_corop = `COROPGEBIED CODE`
)
functiemix_school = read_csv('../data/functiemix-instellingen.csv') %>% select(
jaar = JAAR,
brin = BRIN_NUMMER,
naam_school = INSTELLINGSNAAM,
gemeente = GEMEENTENAAM,
bevoegd_gezag = BEVOEGD_GEZAGNUMMER,
ll_lr_ratio = LEERLING_LERAAR_RATIO,
schooltype = SCHOOLTYPE,
medewerkers = OMVANG_FORMATIE_TOTAAL,
managers = OMVANG_FORMATIE_MANAGER,
ondersteunend_personeel = OMVANG_FORMATIE_OOP_OBP,
onderwijzers = OMVANG_FORMATIE_OP,
medewerkers_op_salaris = OMVANG_FORMATIE_OP_BRUTSAL,
loonsom = LOONSOM_OP_BRUTSAL,
gem_loonsom = GEMIDDELDE_LOONSOM_OP_BRUTSAL,
leerlingen = AANTAL_LEERLINGEN,
loc_randstad = RANDSTAD,
gewicht_ll = AANTAL_GEWICHTLEERLINGEN
) %>% mutate(
perc_gewicht = gewicht_ll / leerlingen
)
functiemix_school = left_join(functiemix_school, adres_vo)
View(functiemix_school)
adres_vo = read_csv('../data/instellingenvo.csv')
View(adres_vo)
rbinom(10, 5, 0.5)
rbinom(1000, 5900, 0.8)
rbinom(1000, 5900, 0.01)
hist(rbinom(1000, 5900, 0.01))
sd(hist(rbinom(1000, 5900, 0.01)))
sd(rbinom(1000, 5900, 0.01))
library(Rmisc)
sd(rbinom(1000, 5900, 0.01) / 5900)
sd(rbinom(1000, 5900, 0.05) / 5900)
sd(rbinom(1000, 5900, 0.1) / 5900)
sd(rbinom(1000, 5900, 0.5) / 5900)
hist(rbinom(1000, 5900, 0.5) / 5900)
hist(rbinom(1000, 5900, 0.5) / 5900, labels = "hallo")
hist(rbinom(1000, 5900, 0.5) / 5900, xlab = "hallo")
hist(rbinom(1000, 5900, 0.5) / 5900, xlab = "hallo", main="Verdeling bevoden infectieratio's bij 1000 steekproeven")
sd(rbinom(1000, 5900, 0.5) / 5900) * 2
install.packages('Rmisc')
CI(rbinom(1000, 5900, 0.5) / 5900)
library(Rmisc)
CI(rbinom(1000, 5900, 0.5) / 5900)
CI(rbinom(1000, 5900, 0.5) / 5900)[1]
CI(rbinom(1000, 5900, 0.01) / 5900)
hist(rbinom(1000, 5900, 0.5) / 5900, xlab = "Infectie-ratio", main="Verdeling infectieratio's bij 1000 steekproeven")
hist(rbinom(1000, 5900, 0.5) / 5900, xlab = "Infectie-ratio", main="Verdeling infectieratio's bij 1000 steekproeven", xlim = c(0, 1))
CI(rbinom(1000, 590, 0.01) / 5900)
hist(rbinom(1000, 590, 0.5) / 5900, xlab = "Infectie-ratio", main="Verdeling infectieratio's bij 1000 steekproeven", xlim = c(0, 1))
hist(rbinom(1000, 590, 0.5) / 590, xlab = "Infectie-ratio", main="Verdeling infectieratio's bij 1000 steekproeven", xlim = c(0, 1))
hist(rbinom(1000, 590, 0.01) / 590, xlab = "Infectie-ratio", main="Verdeling infectieratio's bij 1000 steekproeven", xlim = c(0, 1))
hist(rbinom(1000, 2000, 0.01) / 2000, xlab = "Infectie-ratio", main="Verdeling infectieratio's bij 1000 steekproeven", xlim = c(0, 1))
hist(rbinom(1000, 590, 0.01) / 590, xlab = "Infectie-ratio", main="Verdeling infectieratio's bij 1000 steekproeven", xlim = c(0, 1))
hist(rbinom(1000, 5900, 0.01) / 5900, xlab = "Infectie-ratio", main="Verdeling infectieratio's bij 1000 steekproeven", xlim = c(0, 1))
dist = rbinom(1000, 5900, 0.01) / 5900
CI(dist)
ci[3] - ci[1]
ci = CI(dist)
ci[3] - ci[1]
hist(rbinom(1000, 5900, 0.01) / 5900, xlab = "Infectie-ratio", main="Verdeling infectieratio's bij 1000 steekproeven", xlim = c(0, 0.1))
dist = rbinom(1000, 5900, 0.01) / 5900
ci = CI(dist)
ci[3] - ci[1]
dist = rbinom(1000, 5900, 0.01) / 5900
hist(dist, xlab = "Infectie-ratio", main="Verdeling infectieratio's bij 1000 steekproeven", xlim = c(0, 0.1))
ci = CI(dist)
ci[3] - ci[1]
dist = rbinom(1000, 7300, 0.01) / 5900
n_tests = 7000
dist = rbinom(1000, n_tests, 0.01) / n_tests
hist(dist, xlab = "Infectie-ratio", main="Verdeling infectieratio's bij 1000 steekproeven", xlim = c(0, 0.1))
ci = CI(dist)
ci[3] - ci[1]
hist(rbinom(1000, 5900, 0.01) / 5900, xlab = "Infectie-ratio", main="Verdeling infectieratio's bij 1000 steekproeven met 5900 tests", xlim = c(0, 0.1))
n_tests = 7000
dist = rbinom(1000, n_tests, 0.01) / n_tests
plot_title = paste("Verdeling infectieratio's bij 1000 steekproeven met groepsgrootte", n_tests)
hist(dist, xlab = "Infectie-ratio", main=, xlim = c(0, 0.1))
hist(dist, xlab = "Infectie-ratio", main=v, xlim = c(0, 0.1))
hist(dist, xlab = "Infectie-ratio", main=plot_title, xlim = c(0, 0.1))
ci = CI(dist)
ci[3] - ci[1]
(ci[3] - ci[1]) * 100
round((ci[3] - ci[1]) * 100,2)
round((ci[1] - ci[3]) * 100,2)
paste(round((ci[1] - ci[3]) * 100,2), '%')
paste0(round((ci[1] - ci[3]) * 100,2), '%')
library(tekortindicator)
library(tidyverse)
library(tekortindicator)
adres_bao = read_csv('../data/adres_bao.csv') %>% select(
brin = `BRIN NUMMER`,
pc6 = POSTCODE,
statcode = GEMEENTENUMMER
)
library(tidyverse)
library(tekortindicator)
adres_bao = read_csv('../data_files/adres_bao.csv') %>% select(
brin = `BRIN NUMMER`,
pc6 = POSTCODE,
statcode = GEMEENTENUMMER
)
functiemix_school = read_csv('../data_files/functiemix-instellingen.csv') %>% select(
jaar = JAAR,
brin = BRIN_NUMMER,
naam_school = INSTELLINGSNAAM,
gemeente = GEMEENTENAAM,
bevoegd_gezag = BEVOEGD_GEZAGNUMMER,
ll_lr_ratio = LEERLING_LERAAR_RATIO,
schooltype = SCHOOLTYPE,
medewerkers = OMVANG_FORMATIE_TOTAAL,
managers = OMVANG_FORMATIE_MANAGER,
ondersteunend_personeel = OMVANG_FORMATIE_OOP_OBP,
onderwijzers = OMVANG_FORMATIE_OP,
medewerkers_op_salaris = OMVANG_FORMATIE_OP_BRUTSAL,
loonsom = LOONSOM_OP_BRUTSAL,
gem_loonsom = GEMIDDELDE_LOONSOM_OP_BRUTSAL,
leerlingen = AANTAL_LEERLINGEN,
loc_randstad = RANDSTAD,
gewicht_ll = AANTAL_GEWICHTLEERLINGEN
) %>% mutate(
perc_gewicht = gewicht_ll / leerlingen,
gewogen_ll_lr_ratio = gewicht_ll / onderwijzers
)
functiemix_school = left_join(functiemix_school, adres_bao)
library(tidyverse)
library(tekortindicator)
adres_bao = read_csv('../data_files/adres_bao.csv') %>% select(
brin = `BRIN NUMMER`,
pc6 = POSTCODE,
statcode = GEMEENTENUMMER
)
functiemix_school = read_csv('../data_files/functiemix-instellingen.csv') %>% select(
jaar = JAAR,
brin = BRIN_NUMMER,
naam_school = INSTELLINGSNAAM,
gemeente = GEMEENTENAAM,
bevoegd_gezag = BEVOEGD_GEZAGNUMMER,
ll_lr_ratio = LEERLING_LERAAR_RATIO,
schooltype = SCHOOLTYPE,
medewerkers = OMVANG_FORMATIE_TOTAAL,
managers = OMVANG_FORMATIE_MANAGER,
ondersteunend_personeel = OMVANG_FORMATIE_OOP_OBP,
onderwijzers = OMVANG_FORMATIE_OP,
medewerkers_op_salaris = OMVANG_FORMATIE_OP_BRUTSAL,
loonsom = LOONSOM_OP_BRUTSAL,
gem_loonsom = GEMIDDELDE_LOONSOM_OP_BRUTSAL,
leerlingen = AANTAL_LEERLINGEN,
loc_randstad = RANDSTAD,
gewicht_ll = AANTAL_GEWICHTLEERLINGEN
) %>% mutate(
perc_gewicht = gewicht_ll / leerlingen,
gewogen_ll_lr_ratio = gewicht_ll / onderwijzers
)
functiemix_school = left_join(functiemix_school, adres_bao)
statcode_from_gm_nummer = function(x) if(is.finite(x)) paste0('GM', paste(rep('0', 4-nchar(x)), collapse = ''), x) else NA
functiemix_school$statcode = sapply(functiemix_school$statcode, statcode_from_gm_nummer)
table(functiemix_school$statcode)[1:5]
baos = functiemix_school %>% filter(schooltype == 'bao' & ll_lr_ratio > 5 & ll_lr_ratio < 50)
baos_2019 = baos %>% filter(jaar == 2018)
ggplot(baos_2019, aes(x = ll_lr_ratio)) + geom_histogram() + theme_minimal()
mean_baos_2019 <- baos_2019 %>%
summarize_schools_by_loc(loc=statcode)
head(mean_baos_2019)
library(sf)
gemeentegrenzen <- st_read("https://geodata.nationaalgeoregister.nl/cbsgebiedsindelingen/wfs?request=GetFeature&service=WFS&version=2.0.0&typeName=cbs_gemeente_2019_gegeneraliseerd&outputFormat=json")
data <-
gemeentegrenzen %>%
left_join(mean_baos_2019)
data %>%
ggplot() +
geom_sf(aes(fill = mean_ll_lr_ratio)) +
scale_fill_viridis_c() +
labs(title = "Gemiddelde Leerling/Leraar Ratio (per gemeente)", fill = "") +
theme_void()
ggplot(data) +
geom_sf(aes(fill = perc_high_ll_lr_ratio)) +
labs(title = "Percentage scholen met bovengemiddelde leerling/leraar ratios (per gemeente)", fill = "") +
scale_fill_continuous(type = "viridis") +
theme_void()
ggplot(data) +
geom_sf(aes(fill = ll_lr_ratio_cut)) +
labs(title = "ll_lr_ratio_cut", fill = "") +
scale_fill_brewer(palette = 'Reds') +
theme_void()
data %>% sort_means_table(sort_var = desc(perc_high_ll_lr_ratio))
data %>% sort_means_table(sort_var = perc_high_ll_lr_ratio)
data %>% sort_means_table(sort_var = desc(perc_high_ll_lr_ratio)) %>%
filter(statnaam %in% c('Amsterdam', 'Utrecht', 'Eindhoven', 'Rotterdam', "'s-Gravenhage"))
baos_2009 = baos %>% filter(jaar == 2009)
tot_2009 = baos_2009 %>% summarise(
tot_scholen = n(),
tot_leerlingen = sum(leerlingen),
gem_leerlingen = mean(leerlingen),
tot_onderwijzers = sum(onderwijzers),
gem_ll_lr_ratio = mean(ll_lr_ratio),
tot_ll_lr_ratio = sum(leerlingen) / sum(onderwijzers)
)
head(tot_2009)
tot_2019 = baos_2019 %>% summarise(
tot_scholen = n(),
tot_leerlingen = sum(leerlingen),
gem_leerlingen = mean(leerlingen),
tot_onderwijzers = sum(onderwijzers),
gem_ll_lr_ratio = mean(ll_lr_ratio),
tot_ll_lr_ratio = sum(leerlingen) / sum(onderwijzers)
)
head(tot_2019)
round(unlist(tot_2019) / unlist(tot_2009), 2)
mean_baos_2009 <- baos_2009 %>%
tekortindicator::summarize_schools_by_loc(loc=statcode)
mean_baos_joined = join_means_tables(mean_baos_2009, mean_baos_2019)
data <-
gemeentegrenzen %>%
left_join(mean_baos_joined)
ggplot(data) +
geom_sf(aes(fill = change_ll_lr_ratio_cut)) +
labs(title = "Verandering Leerling-leraar ratio 2009-2019 (per gemeente)", fill = "") +
scale_fill_brewer(palette = 'Reds') +
theme_void()
sort_changes_table = function(.data, sort_var) {
.data %>% as_tibble() %>%
arrange({{sort_var}}) %>%
select(statnaam, change_ll_lr_ratio, change_weighted_ll_lr_ratio ,change_ll_lr_ratio_cut, change_weighted_ll_lr_ratio_cut, ll_lr_ratio_2009, ll_lr_ratio_2019)
}
data %>% sort_changes_table(sort_var = desc(change_ll_lr_ratio)) %>%
filter(statnaam %in% c('Amsterdam', 'Utrecht', 'Eindhoven', 'Rotterdam', "'s-Gravenhage"))
data %>% sort_changes_table(sort_var = desc(change_ll_lr_ratio))
data %>% sort_changes_table(sort_var = change_ll_lr_ratio)
library(tidyverse)
library(tidyverse)
library(tekortindicator)
adres_bao = read_csv('../data_files/adres_bao.csv') %>% select(
brin = `BRIN NUMMER`,
pc6 = POSTCODE,
statcode = GEMEENTENUMMER
)
functiemix_school = read_csv('../data_files/functiemix-instellingen.csv') %>% select(
jaar = JAAR,
brin = BRIN_NUMMER,
naam_school = INSTELLINGSNAAM,
gemeente = GEMEENTENAAM,
bevoegd_gezag = BEVOEGD_GEZAGNUMMER,
ll_lr_ratio = LEERLING_LERAAR_RATIO,
schooltype = SCHOOLTYPE,
medewerkers = OMVANG_FORMATIE_TOTAAL,
managers = OMVANG_FORMATIE_MANAGER,
ondersteunend_personeel = OMVANG_FORMATIE_OOP_OBP,
onderwijzers = OMVANG_FORMATIE_OP,
medewerkers_op_salaris = OMVANG_FORMATIE_OP_BRUTSAL,
loonsom = LOONSOM_OP_BRUTSAL,
gem_loonsom = GEMIDDELDE_LOONSOM_OP_BRUTSAL,
leerlingen = AANTAL_LEERLINGEN,
loc_randstad = RANDSTAD,
gewicht_ll = AANTAL_GEWICHTLEERLINGEN
) %>% mutate(
perc_gewicht = gewicht_ll / leerlingen,
gewogen_ll_lr_ratio = gewicht_ll / onderwijzers
)
functiemix_school = left_join(functiemix_school, adres_bao)
library(tidyverse)
library(tekortindicator)
adres_bao = read_csv('../data_files/adres_bao.csv') %>% select(
brin = `BRIN NUMMER`,
pc6 = POSTCODE,
statcode = GEMEENTENUMMER
)
functiemix_school = read_csv('../data_files/functiemix-instellingen.csv') %>% select(
jaar = JAAR,
brin = BRIN_NUMMER,
naam_school = INSTELLINGSNAAM,
gemeente = GEMEENTENAAM,
bevoegd_gezag = BEVOEGD_GEZAGNUMMER,
ll_lr_ratio = LEERLING_LERAAR_RATIO,
schooltype = SCHOOLTYPE,
medewerkers = OMVANG_FORMATIE_TOTAAL,
managers = OMVANG_FORMATIE_MANAGER,
ondersteunend_personeel = OMVANG_FORMATIE_OOP_OBP,
onderwijzers = OMVANG_FORMATIE_OP,
medewerkers_op_salaris = OMVANG_FORMATIE_OP_BRUTSAL,
loonsom = LOONSOM_OP_BRUTSAL,
gem_loonsom = GEMIDDELDE_LOONSOM_OP_BRUTSAL,
leerlingen = AANTAL_LEERLINGEN,
loc_randstad = RANDSTAD,
gewicht_ll = AANTAL_GEWICHTLEERLINGEN
) %>% mutate(
perc_gewicht = gewicht_ll / leerlingen,
gewogen_ll_lr_ratio = gewicht_ll / onderwijzers
)
We willen deze data tonen op kaarten van het CBS. Helaas is het gemeentenummer in de verschillende datasets verschillende geformatteerd. We schrijven de gemeentenummers uit de DUO dataset om naar het formaat van het CBS.
```{r}
statcode_from_gm_nummer = function(x) if(is.finite(x)) paste0('GM', paste(rep('0', 4-nchar(x)), collapse = ''), x) else NA
functiemix_school$statcode = sapply(functiemix_school$statcode, statcode_from_gm_nummer)
table(functiemix_school$statcode)[1:5]
statcode_from_gm_nummer = function(x) if(is.finite(x)) paste0('GM', paste(rep('0', 4-nchar(x)), collapse = ''), x) else NA
functiemix_school$statcode = sapply(functiemix_school$statcode, statcode_from_gm_nummer)
library(tidyverse)
library(tekortindicator)
adres_bao = read_csv('../data_files/adres_bao.csv') %>% select(
brin = `BRIN NUMMER`,
pc6 = POSTCODE,
statcode = GEMEENTENUMMER
)
functiemix_school = read_csv('../data_files/functiemix-instellingen.csv') %>% select(
jaar = JAAR,
brin = BRIN_NUMMER,
naam_school = INSTELLINGSNAAM,
gemeente = GEMEENTENAAM,
bevoegd_gezag = BEVOEGD_GEZAGNUMMER,
ll_lr_ratio = LEERLING_LERAAR_RATIO,
schooltype = SCHOOLTYPE,
medewerkers = OMVANG_FORMATIE_TOTAAL,
managers = OMVANG_FORMATIE_MANAGER,
ondersteunend_personeel = OMVANG_FORMATIE_OOP_OBP,
onderwijzers = OMVANG_FORMATIE_OP,
medewerkers_op_salaris = OMVANG_FORMATIE_OP_BRUTSAL,
loonsom = LOONSOM_OP_BRUTSAL,
gem_loonsom = GEMIDDELDE_LOONSOM_OP_BRUTSAL,
leerlingen = AANTAL_LEERLINGEN,
loc_randstad = RANDSTAD,
gewicht_ll = AANTAL_GEWICHTLEERLINGEN
) %>% mutate(
perc_gewicht = gewicht_ll / leerlingen,
gewogen_ll_lr_ratio = gewicht_ll / onderwijzers
)
functiemix_school = left_join(functiemix_school, adres_bao)
statcode_from_gm_nummer = function(x) if(is.finite(x)) paste0('GM', paste(rep('0', 4-nchar(x)), collapse = ''), x) else NA
functiemix_school$statcode = sapply(functiemix_school$statcode, statcode_from_gm_nummer)
table(functiemix_school$statcode)[1:5]
View(functiemix_school)
unique(functiemix_school$schooltype)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
sbao_data = functiemix_school %>% filter(schooltype %in% c('sbao', 'bao')) %>%
group_by(jaar, schooltype) %>%
summarise(leerlingen = sum(leerlingen)) %>%
group_by(jaar) %>% summarise(perc_sbao = leerlingen[2] / leerlingen[1], bao = leerlingen[1], sbao = leerlingen[2])
ggplot(sbao_data, aes(x = jaar, y = perc_sbao)) + geom_area()
sbao_data
0.0289 - 0.0252
0.0037 * 1398606
0.0289 - 0.0230
0.0059 * 1398606
functiemix_school %>% filter(jaar == 2019, schooltype == 'bao')
sbao_data = functiemix_school %>% filter(schooltype %in% c('sbao', 'bao', 'wec')) %>%
group_by(jaar, schooltype) %>%
summarise(leerlingen = sum(leerlingen)) %>%
group_by(jaar) %>% summarise(perc_sbao = leerlingen[2] / leerlingen[1], bao = leerlingen[1], sbao = leerlingen[2])
ggplot(sbao_data, aes(x = jaar, y = perc_sbao)) + geom_area()
sbao_data = functiemix_school %>% filter(schooltype %in% c('sbao', 'bao', 'wec')) %>%
group_by(jaar, schooltype) %>%
summarise(leerlingen = sum(leerlingen)) %>%
ggplot(aes(x = jaar, y = leerlingen), group = schooltype, fill = schooltype)
sbao_data = functiemix_school %>% filter(schooltype %in% c('sbao', 'bao', 'wec')) %>%
group_by(jaar, schooltype) %>%
summarise(leerlingen = sum(leerlingen)) %>%
ggplot(aes(x = jaar, y = leerlingen, group = schooltype, fill = schooltype)) + geom_area()
functiemix_school %>% filter(schooltype %in% c('sbao', 'bao', 'wec')) %>%
group_by(jaar, schooltype) %>%
summarise(leerlingen = sum(leerlingen)) %>%
ggplot(aes(x = jaar, y = leerlingen, group = schooltype, fill = schooltype)) + geom_area()
functiemix_school %>% filter(schooltype %in% c('sbao', 'bao', 'wec')) %>%
group_by(jaar, schooltype) %>%
summarise(leerlingen = sum(leerlingen))
View(functiemix_school %>% filter(schooltype %in% c('sbao', 'bao', 'wec')) %>%
group_by(jaar, schooltype) %>%
summarise(leerlingen = sum(leerlingen)))
functiemix_school %>% filter(schooltype %in% c('sbao', 'bao', 'wec')) %>%
group_by(jaar, schooltype) %>%
summarise(leerlingen = sum(leerlingen)) %>%
group_by(jaar) %>% summarise(perc_sbao = (leerlingen[3] + leerlingen[2]) / sum(leerlingen), bao = leerlingen[1], sbao = leerlingen[2])
functiemix_school %>% filter(schooltype %in% c('sbao', 'bao', 'wec')) %>%
group_by(jaar, schooltype) %>%
summarise(leerlingen = sum(leerlingen)) %>%
group_by(jaar) %>% summarise(perc_sbao = (leerlingen[3] + leerlingen[2]) / sum(leerlingen), bao = leerlingen[1], sbao = leerlingen[2]) %>%
ggplot(sbao_data, aes(x = jaar, y = perc_sbao)) + geom_area()
functiemix_school %>% filter(schooltype %in% c('sbao', 'bao', 'wec')) %>%
group_by(jaar, schooltype) %>%
summarise(leerlingen = sum(leerlingen)) %>%
group_by(jaar) %>% summarise(perc_sbao = (leerlingen[3] + leerlingen[2]) / sum(leerlingen), bao = leerlingen[1], sbao = leerlingen[2]) %>%
ggplot(aes(x = jaar, y = perc_sbao)) + geom_area()
functiemix_school %>% filter(schooltype %in% c('sbao', 'bao', 'wec')) %>%
group_by(jaar, schooltype) %>%
summarise(leerlingen = sum(leerlingen)) %>%
ggplot(aes(x = jaar, y = leerlingen, group = schooltype, fill = schooltype)) + geom_area()
functiemix_school %>% filter(schooltype %in% c('sbao', 'bao', 'wec')) %>%
group_by(jaar, schooltype) %>%
summarise(leerlingen = sum(leerlingen)) %>%
ggplot(aes(x = jaar, y = log(leerlingen), group = schooltype, fill = schooltype)) + geom_area()
functiemix_school %>% filter(schooltype %in% c('sbao', 'bao', 'wec')) %>%
group_by(jaar, schooltype) %>%
summarise(leerlingen = sum(leerlingen)) %>%
ggplot(aes(x = jaar, y = leerlingen, group = schooltype, fill = schooltype)) + geom_area()
functiemix_school %>% filter(schooltype %in% c('sbao', 'bao', 'wec')) %>%
group_by(jaar, schooltype) %>%
summarise(leerlingen = sum(leerlingen))
functiemix_school %>% filter(schooltype %in% c('sbao', 'bao', 'wec')) %>%
group_by(jaar, schooltype) %>%
summarise(leerlingen = sum(leerlingen)) %>%
group_by(jaar) %>% summarise(perc_sbao = leerlingen[2] / sum(leerlingen), perc_wec = leerlingen[3] / sum(leerlingen)) %>%
ggplot(aes(x = jaar, y = perc_sbao)) + geom_area()
functiemix_school %>% filter(schooltype %in% c('sbao', 'bao', 'wec')) %>%
group_by(jaar, schooltype) %>%
summarise(leerlingen = sum(leerlingen)) %>%
group_by(jaar) %>% summarise(perc_sbao = leerlingen[2] / sum(leerlingen), perc_wec = leerlingen[3] / sum(leerlingen))
